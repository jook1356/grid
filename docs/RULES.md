# AI 개발 규칙
이 문서는 AI와 함께 개발할 때 따라야 할 규칙들을 정의합니다.

## 1. PureSheet Grid 프로젝트 규칙

이 프로젝트는 고성능 Grid 라이브러리를 개발하고 있습니다.

### 필수 참조 문서
- 개발 규칙: `docs/RULES.md`
- 전체 설계: `docs/base/` 폴더
- 작업 기록: `docs/history/` 폴더

### 개발 방식
1. 단계별로 차근차근 구현 (한꺼번에 X)
2. 초보자도 이해할 수 있도록 설명
3. 각 회차 완료 시 `docs/history/XX-작업명.md` 파일 생성
    - 모든 작업은 `docs/history/` 폴더에 회차별로 기록합니다.
    - 파일명 형식: `XX-작업명.md` (예: `01-project-setup.md`)
    - 각 기록에는 다음 내용을 포함합니다:
        - 이번 회차에서 구현한 내용
        - 생성/수정된 파일 목록
        - 핵심 개념 설명
        - 다음 회차 예고
4. 한국어로 응답

### 히스토리 기록 규칙
기존 설정이나 구조를 변경할 때는 `docs/history/` 문서를 함께 업데이트합니다.

#### 기록이 필요한 경우
- 패키지 매니저 변경 (npm → pnpm 등)
- 의존성 추가/제거/업데이트
- 빌드 설정 변경 (vite, tsconfig 등)
- 프로젝트 구조 변경
- 새로운 스크립트 추가

#### 기록 방법
1. **기존 히스토리 수정**: 해당 회차 문서의 관련 섹션 업데이트
    - 예: 패키지 매니저 변경 시 `01-project-setup.md`의 명령어 수정
2. **새 히스토리 추가**: 큰 변경사항은 새 회차 문서 생성
    - 예: `08-infrastructure-update.md`
3. **인라인 수정**: 명령어, 설정값 등 작은 변경은 해당 위치에서 직접 수정
4. **아키텍처 수정**: 아키텍처 변경 시 `docs/base/` 폴더의 관련 문서 업데이트
5. **아키텍처 생성**: 새로운 아키텍처 설계 시 `docs/base/` 폴더의 관련 문서 생성

### 코드 스타일
- TypeScript strict 모드
- 주석: 한국어
- 변수/함수: camelCase (영어)
- 클래스: PascalCase (영어)
- any 타입 사용 최소화

#### 코드 주석
- 각 파일 상단에 파일의 역할 설명
- 복잡한 로직에는 "왜" 이렇게 했는지 설명
- 공개 API에는 JSDoc 주석 필수

### 설명 방식

#### 초보자 친화적
- 전문 용어를 처음 사용할 때는 설명을 덧붙입니다.
- 비유나 예시를 활용합니다.
- "왜 이렇게 하는가?"를 먼저 설명합니다.

#### 구조
```
1. 왜 이게 필요한가? (동기)
2. 무엇을 할 것인가? (목표)
3. 어떻게 하는가? (구현)
4. 핵심 포인트 정리 (요약)
```

---

## 2. 개발 진행 방식

### 1.1 단계별 구현
- 한꺼번에 모든 것을 구현하지 않습니다.
- 중요도와 의존성 순서를 고려하여 차례대로 진행합니다.
- 각 단계마다 초보자도 이해할 수 있도록 설명합니다.

---

## 2. 코드 스타일

### 2.1 언어
- 코드: TypeScript (strict 모드)
- 주석: 한국어
- 변수/함수명: 영어 (camelCase)
- 클래스명: 영어 (PascalCase)

### 2.2 파일 구조
```
src/
├── index.ts              # 진입점 (export만)
├── types/                # 타입 정의
├── core/                 # 핵심 로직
├── processor/            # 데이터 처리 (Worker)
└── utils/                # 유틸리티
```

### 2.3 핵심 설계 원칙
- 단일 책임: 각 모듈은 하나의 역할만
- 의존성 역전: 인터페이스에 의존
- 프레임워크 무관: React/Vue/Angular에서 사용 가능
- 이벤트 기반: 상태 변경을 이벤트로 알림

## 5. 품질 관리

### 5.1 타입 안전성
- `any` 타입 사용 최소화
- `strict: true` 설정 유지
- 외부 데이터는 반드시 타입 검증

### 5.2 테스트
- 각 모듈에 단위 테스트 작성
- 핵심 기능은 통합 테스트 포함
- 테스트 파일: `*.test.ts` 또는 `tests/` 폴더

### 5.3 에러 처리
- 예상 가능한 에러는 명시적으로 처리
- 에러 메시지는 구체적으로 작성
- 비동기 작업은 try-catch로 감싸기

---

## 6. 구현 순서 (참고)

| 순서 | 모듈 | 상태 |
|------|------|------|
| 1 | 프로젝트 설정 | ✅ 완료 |
| 2 | types/ (타입 정의) | 🔜 다음 |
| 3 | EventEmitter | ⏳ 대기 |
| 4 | DataStore | ⏳ 대기 |
| 5 | IndexManager | ⏳ 대기 |
| 6 | ArqueroProcessor | ⏳ 대기 |
| 7 | worker.ts | ⏳ 대기 |
| 8 | WorkerBridge | ⏳ 대기 |
| 9 | GridCore | ⏳ 대기 |
| 10 | 테스트 | ⏳ 대기 |

---

## 7. 버전 관리

### 7.1 커밋 메시지
```
feat: 새 기능 추가
fix: 버그 수정
docs: 문서 변경
refactor: 리팩토링
test: 테스트 추가/수정
chore: 빌드/설정 변경
```

### 7.2 브랜치 전략 (선택)
- `main`: 안정 버전
- `develop`: 개발 중
- `feature/기능명`: 새 기능 개발
