<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi-Row ë ˆì´ì•„ì›ƒ - PureSheet Demo</title>
  <link rel="stylesheet" href="../shared/styles.css">
  <link rel="stylesheet" href="../../src/ui/style/default.css">
  <style>
    /* Multi-Row ì¶”ê°€ ìŠ¤íƒ€ì¼ */
    .layout-info {
      background: #f5f5f5;
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 16px;
      font-size: 14px;
    }
    
    .layout-info code {
      background: #e8e8e8;
      padding: 2px 6px;
      border-radius: 3px;
    }
    
    /* ë ˆì´ì•„ì›ƒ ë‹¤ì´ì–´ê·¸ë¨ */
    .layout-diagram {
      display: flex;
      gap: 40px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    
    .diagram-item {
      flex: 1;
      min-width: 300px;
    }
    
    .diagram-item h4 {
      margin-bottom: 12px;
      font-size: 14px;
      color: #666;
    }
    
    .diagram-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    
    .diagram-table td, .diagram-table th {
      border: 1px solid #ccc;
      padding: 8px 12px;
      text-align: center;
    }
    
    .diagram-table th {
      background: #f0f0f0;
      font-weight: 500;
    }
    
    .diagram-table .span-cell {
      background: #e3f2fd;
    }
  </style>
</head>
<body>
  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="demo-nav">
    <a href="../index.html">ğŸ  í™ˆ</a>
    <a href="pinning.html">ğŸ“Œ í–‰/ì»¬ëŸ¼ ê³ ì •</a>
    <a href="multi-row.html" class="active">ğŸ“‘ Multi-Row</a>
    <a href="grouping.html">ğŸ“‚ í–‰ ê·¸ë£¹í™”</a>
    <a href="selection-modes.html">ğŸ¯ ì„ íƒ ëª¨ë“œ</a>
    <a href="pivot.html">ğŸ“Š í”¼ë²—</a>
  </nav>
  
  <!-- í—¤ë” -->
  <div class="demo-header">
    <h1>ğŸ“‘ Multi-Row ë ˆì´ì•„ì›ƒ</h1>
    <span class="badge badge-success">êµ¬í˜„ë¨</span>
  </div>
  
  <!-- ì„¤ëª… -->
  <div class="demo-description">
    <p>
      <strong>Multi-Row ë ˆì´ì•„ì›ƒ</strong>ì€ í•˜ë‚˜ì˜ ë°ì´í„° í–‰ì„ ì—¬ëŸ¬ ì¤„ë¡œ í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
      ë³µì¡í•œ ì •ë³´ë¥¼ ê°€ë…ì„± ìˆê²Œ í‘œí˜„í•˜ê±°ë‚˜, ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ì¢ì€ í™”ë©´ì„ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
      <code>rowTemplate</code>ì—ì„œ <code>colSpan</code>ê³¼ <code>rowSpan</code>ì„ ì§€ì •í•˜ì—¬ ì…€ ë³‘í•©ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    </p>
  </div>
  
  <div class="demo-container">
    <div class="toolbar">
      <div class="toolbar-group">
        <button onclick="applyLayout1()">ë ˆì´ì•„ì›ƒ 1 (2ì¤„)</button>
        <button onclick="applyLayout2()">ë ˆì´ì•„ì›ƒ 2 (3ì¤„)</button>
        <button onclick="applyNormalLayout()" class="secondary">ë‹¨ì¼ í–‰ (ê¸°ë³¸)</button>
      </div>
    </div>
    
    <div class="layout-info" id="layoutInfo">
      í˜„ì¬ ë ˆì´ì•„ì›ƒ: <code>ë ˆì´ì•„ì›ƒ 1 (2ì¤„)</code> - IDì™€ Salaryê°€ rowSpan=2, Emailì´ colSpan=2 (5ê°œ ê·¸ë¦¬ë“œ ì»¬ëŸ¼)
    </div>
    
    <!-- ê·¸ë¦¬ë“œ ì˜ì—­ -->
    <div id="grid" style="height: 500px;"></div>
    
    <div class="status-bar" id="status">
      100ê°œ ë°ì´í„° ë¡œë“œë¨
    </div>
  </div>
  
  <!-- ë ˆì´ì•„ì›ƒ ë‹¤ì´ì–´ê·¸ë¨ -->
  <div class="info-panel">
    <h3>ğŸ“ ë ˆì´ì•„ì›ƒ êµ¬ì¡°</h3>
    <div class="layout-diagram">
      <div class="diagram-item">
        <h4>ë ˆì´ì•„ì›ƒ 1: 2ì¤„ ë ˆì´ì•„ì›ƒ (5 ê·¸ë¦¬ë“œ ì»¬ëŸ¼)</h4>
        <table class="diagram-table">
          <tr>
            <th rowspan="2" class="span-cell">ID<br><small>(rowSpan: 2)</small></th>
            <th>Name</th>
            <th colspan="2" class="span-cell">Email<br><small>(colSpan: 2)</small></th>
            <th rowspan="2" class="span-cell">Salary<br><small>(rowSpan: 2)</small></th>
          </tr>
          <tr>
            <th>Dept</th>
            <th>Status</th>
            <th>JoinDate</th>
          </tr>
        </table>
      </div>
      
      <div class="diagram-item">
        <h4>ë ˆì´ì•„ì›ƒ 2: 3ì¤„ ë ˆì´ì•„ì›ƒ</h4>
        <table class="diagram-table">
          <tr>
            <th rowspan="3" class="span-cell">ID</th>
            <th colspan="3" class="span-cell">Name + Email (colSpan: 3)</th>
          </tr>
          <tr>
            <th>Department</th>
            <th>Status</th>
            <th>Salary</th>
          </tr>
          <tr>
            <th colspan="3" class="span-cell">Join Date + ì¶”ê°€ ì •ë³´</th>
          </tr>
        </table>
      </div>
    </div>
  </div>
  
  <!-- ì½”ë“œ ì˜ˆì œ -->
  <div class="code-example">
    <h3>API ì‚¬ìš©ë²• (ìƒˆ Config API)</h3>
    <pre><span class="keyword">const</span> pureSheet = <span class="keyword">new</span> <span class="function">PureSheet</span>(container, {
  mode: <span class="string">'flat'</span>,
  fields: [
    { key: <span class="string">'id'</span>, header: <span class="string">'ID'</span>, dataType: <span class="string">'number'</span>, width: <span class="number">60</span> },
    { key: <span class="string">'name'</span>, header: <span class="string">'Name'</span>, dataType: <span class="string">'string'</span>, width: <span class="number">120</span> },
    <span class="comment">// ... ê¸°íƒ€ í•„ë“œ</span>
  ],
  data: myData,
  columns: [<span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'email'</span>, <span class="string">'dept'</span>, <span class="string">'status'</span>, <span class="string">'salary'</span>, <span class="string">'joinDate'</span>],
  
  <span class="comment">// Multi-Row í…œí”Œë¦¿ ì •ì˜</span>
  rowTemplate: {
    rowCount: <span class="number">2</span>,  <span class="comment">// ë°ì´í„° 1ê°œ = ì‹œê°ì  2ì¤„</span>
    layout: [
      [
        { key: <span class="string">'id'</span>, rowSpan: <span class="number">2</span> },      <span class="comment">// 2ì¤„ì— ê±¸ì¹¨</span>
        { key: <span class="string">'name'</span> },
        { key: <span class="string">'email'</span>, colSpan: <span class="number">2</span> },   <span class="comment">// 2ì¹¸ ì°¨ì§€</span>
        { key: <span class="string">'salary'</span>, rowSpan: <span class="number">2</span> },
      ],
      [
        { key: <span class="string">'dept'</span> },
        { key: <span class="string">'status'</span> },
        { key: <span class="string">'joinDate'</span> },
      ],
    ],
  },
});</pre>
  </div>
  
  <script type="module">
    import { PureSheet } from '../../src/index.ts';
    
    // ìƒˆ Config API: fields ì‚¬ìš©
    const fields = [
      { key: 'id', header: 'ID', dataType: 'number', width: 60 },
      { key: 'name', header: 'Name', dataType: 'string', width: 120 },
      { key: 'email', header: 'Email', dataType: 'string', width: 200 },
      { key: 'dept', header: 'Dept', dataType: 'string', width: 100 },
      { key: 'status', header: 'Status', dataType: 'string', width: 80 },
      { key: 'salary', header: 'Salary', dataType: 'string', width: 100 },
      { key: 'joinDate', header: 'Join Date', dataType: 'string', width: 100 },
    ];
    
    // ë ˆì´ì•„ì›ƒ ì •ì˜
    // 
    // Multi-Row ë ˆì´ì•„ì›ƒì€ CSS Grid ê¸°ë°˜ì…ë‹ˆë‹¤.
    // í•µì‹¬ ê·œì¹™: ëª¨ë“  í–‰ì˜ ì´ "ê·¸ë¦¬ë“œ ì»¬ëŸ¼ ìˆ˜"ê°€ ë™ì¼í•´ì•¼ í•©ë‹ˆë‹¤.
    // colSpanì´ ìˆëŠ” ì…€ì€ ì—¬ëŸ¬ ê·¸ë¦¬ë“œ ì»¬ëŸ¼ì„ ì°¨ì§€í•©ë‹ˆë‹¤.
    // rowSpanì´ ìˆëŠ” ì…€ì€ ë‹¤ìŒ í–‰ì—ì„œ í•´ë‹¹ ìœ„ì¹˜ë¥¼ ìë™ìœ¼ë¡œ ê±´ë„ˆëœë‹ˆë‹¤.
    //
    // ë ˆì´ì•„ì›ƒ 1: 5ê°œ ê·¸ë¦¬ë“œ ì»¬ëŸ¼
    // â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚ ID â”‚   Name   â”‚   Email (colSpan=2)  â”‚  Salary  â”‚  <- Row 1
    // â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
    // â”‚    â”‚   Dept   â”‚  Status  â”‚  JoinDate â”‚          â”‚  <- Row 2
    // â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    const layout1 = {
      rowCount: 2,
      layout: [
        // ì²« ë²ˆì§¸ ì¤„: ID(1) + Name(1) + Email(colSpan=2) + Salary(1) = 5ê°œ ê·¸ë¦¬ë“œ ì»¬ëŸ¼
        [
          { key: 'id', rowSpan: 2 },      // 2ì¤„ì— ê±¸ì¹¨
          { key: 'name' },
          { key: 'email', colSpan: 2 },   // 2ì¹¸ ì°¨ì§€
          { key: 'salary', rowSpan: 2 },  // 2ì¤„ì— ê±¸ì¹¨
        ],
        // ë‘ ë²ˆì§¸ ì¤„: ID ê±´ë„ˆëœ€ + Dept(1) + Status(1) + JoinDate(1) + Salary ê±´ë„ˆëœ€ = 5ê°œ
        [
          { key: 'dept' },
          { key: 'status' },
          { key: 'joinDate' },
        ],
      ],
    };
    
    // ë ˆì´ì•„ì›ƒ 2: 4ê°œ ê·¸ë¦¬ë“œ ì»¬ëŸ¼
    // â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚    â”‚   Name (colSpan=2)  â”‚  Email   â”‚  <- Row 1
    // â”‚ ID â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    // â”‚    â”‚   Dept   â”‚  Status  â”‚  Salary  â”‚  <- Row 2
    // â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    // â”‚    â”‚      JoinDate (colSpan=3)      â”‚  <- Row 3
    // â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    const layout2 = {
      rowCount: 3,
      layout: [
        // ì²« ë²ˆì§¸ ì¤„: ID(1, rowSpan=3) + Name(colSpan=2) + Email(1) = 4ê°œ
        [
          { key: 'id', rowSpan: 3 },
          { key: 'name', colSpan: 2 },
          { key: 'email' },
        ],
        // ë‘ ë²ˆì§¸ ì¤„: ID ê±´ë„ˆëœ€ + Dept(1) + Status(1) + Salary(1) = 4ê°œ
        [
          { key: 'dept' },
          { key: 'status' },
          { key: 'salary' },
        ],
        // ì„¸ ë²ˆì§¸ ì¤„: ID ê±´ë„ˆëœ€ + JoinDate(colSpan=3) = 4ê°œ
        [
          { key: 'joinDate', colSpan: 3 },
        ],
      ],
    };
    
    // ìƒ˜í”Œ ë°ì´í„° ìƒì„±
    const names = ['ê¹€ì² ìˆ˜', 'ì´ì˜í¬', 'ë°•ë¯¼ìˆ˜', 'ì •ìˆ˜ì§„', 'ìµœë™í˜„', 'í•œì§€ë¯¼', 'ê°•í˜¸ë™', 'ìœ ì¬ì„', 'ì‹ ë™ì—½', 'ì†¡í˜œêµ'];
    const depts = ['Engineering', 'Marketing', 'Sales', 'HR', 'Finance'];
    const statuses = ['Active', 'Inactive', 'Pending'];
    
    const sampleData = Array.from({ length: 100 }, (_, i) => ({
      id: i + 1,
      name: names[i % names.length] + (Math.floor(i / 10) || ''),
      email: `user${i + 1}@example.com`,
      dept: depts[i % depts.length],
      status: statuses[i % statuses.length],
      salary: `$${(50000 + Math.floor(Math.random() * 50000)).toLocaleString()}`,
      joinDate: `202${Math.floor(i % 5)}-${String((i % 12) + 1).padStart(2, '0')}-${String((i % 28) + 1).padStart(2, '0')}`
    }));
    
    // PureSheet ì´ˆê¸°í™”
    let renderer = null;
    const gridContainer = document.getElementById('grid');
    
    async function createRenderer(rowTemplate) {
      // ê¸°ì¡´ ë Œë”ëŸ¬ ì œê±°
      if (renderer) {
        renderer.destroy();
      }
      
      // ìƒˆ PureSheet ìƒì„± (ìƒˆ Config API)
      renderer = new PureSheet(gridContainer, {
        mode: 'flat',
        fields,
        data: sampleData,
        columns: ['id', 'name', 'email', 'dept', 'status', 'salary', 'joinDate'],
        rowHeight: 36,
        rowTemplate: rowTemplate || undefined,
      });
    }
    
    // ë ˆì´ì•„ì›ƒ 1 ì ìš©
    window.applyLayout1 = async function() {
      await createRenderer(layout1);
      document.getElementById('layoutInfo').innerHTML = 
        'í˜„ì¬ ë ˆì´ì•„ì›ƒ: <code>ë ˆì´ì•„ì›ƒ 1 (2ì¤„)</code> - IDì™€ Salaryê°€ rowSpan=2, Emailì´ colSpan=2';
      document.getElementById('status').textContent = 'ë ˆì´ì•„ì›ƒ 1 ì ìš©ë¨ (2ì¤„ ë ˆì´ì•„ì›ƒ)';
    };
    
    // ë ˆì´ì•„ì›ƒ 2 ì ìš©
    window.applyLayout2 = async function() {
      await createRenderer(layout2);
      document.getElementById('layoutInfo').innerHTML = 
        'í˜„ì¬ ë ˆì´ì•„ì›ƒ: <code>ë ˆì´ì•„ì›ƒ 2 (3ì¤„)</code> - IDê°€ rowSpan=3, ê° ì¤„ì— colSpan ì ìš©';
      document.getElementById('status').textContent = 'ë ˆì´ì•„ì›ƒ 2 ì ìš©ë¨ (3ì¤„ ë ˆì´ì•„ì›ƒ)';
    };
    
    // ì¼ë°˜ ë ˆì´ì•„ì›ƒ ì ìš©
    window.applyNormalLayout = async function() {
      await createRenderer(null);
      document.getElementById('layoutInfo').innerHTML = 
        'í˜„ì¬ ë ˆì´ì•„ì›ƒ: <code>ë‹¨ì¼ í–‰ (ê¸°ë³¸)</code> - ì¼ë°˜ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ';
      document.getElementById('status').textContent = 'ë‹¨ì¼ í–‰ ë ˆì´ì•„ì›ƒ ì ìš©ë¨';
    };
    
    // ì´ˆê¸° ë Œë”ë§
    await createRenderer(layout1);
  </script>
</body>
</html>
