<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„ íƒ ëª¨ë“œ (Selection Modes) - PureSheet Demo</title>
  <link rel="stylesheet" href="../shared/styles.css">
  <link rel="stylesheet" href="../../src/ui/style/default.css">
  <style>
    .mode-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin: 24px 0;
    }
    
    .mode-card {
      background: #fff;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .mode-card:hover {
      border-color: #1976d2;
      box-shadow: 0 4px 12px rgba(25, 118, 210, 0.15);
    }
    
    .mode-card.active {
      border-color: #1976d2;
      background: #e3f2fd;
    }
    
    .mode-card h4 {
      margin: 0 0 8px 0;
      color: #333;
      font-size: 1.1rem;
    }
    
    .mode-card p {
      margin: 0 0 12px 0;
      color: #666;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    
    .mode-card code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    
    .mode-card .data-preview {
      background: #f8f9fa;
      border-radius: 4px;
      padding: 8px;
      font-family: monospace;
      font-size: 0.8rem;
      color: #555;
    }
    
    .selection-info {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    
    .selection-info pre {
      margin: 0;
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      overflow-x: auto;
      max-height: 200px;
    }
    
    .selection-info h4 {
      margin: 0 0 8px 0;
      color: #333;
      font-size: 0.95rem;
    }
    
    .instructions {
      background: #fff3e0;
      border-left: 4px solid #ff9800;
      padding: 12px 16px;
      margin: 16px 0;
      border-radius: 0 4px 4px 0;
    }
    
    .instructions ul {
      margin: 8px 0 0 0;
      padding-left: 20px;
    }
    
    .instructions li {
      margin: 4px 0;
    }
  </style>
</head>
<body>
  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="demo-nav">
    <a href="../index.html">ğŸ  í™ˆ</a>
    <a href="pinning.html">ğŸ“Œ í–‰/ì»¬ëŸ¼ ê³ ì •</a>
    <a href="multi-row.html">ğŸ“‘ Multi-Row</a>
    <a href="grouping.html">ğŸ“‚ í–‰ ê·¸ë£¹í™”</a>
    <a href="selection-modes.html" class="active">ğŸ¯ ì„ íƒ ëª¨ë“œ</a>
  </nav>
  
  <!-- í—¤ë” -->
  <div class="demo-header">
    <h1>ğŸ¯ ì„ íƒ ëª¨ë“œ (Selection Modes)</h1>
    <span class="badge badge-implemented">êµ¬í˜„ë¨</span>
  </div>
  
  <!-- ì„¤ëª… -->
  <div class="demo-description">
    <p>
      <strong>ì„ íƒ ëª¨ë“œ</strong>ëŠ” ì‚¬ìš©ìê°€ ê·¸ë¦¬ë“œì—ì„œ ë°ì´í„°ë¥¼ ì„ íƒí•˜ëŠ” ë°©ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤.
      ìš©ë„ì— ë§ê²Œ í–‰ ì„ íƒ, ì…€ ì„ íƒ, ë˜ëŠ” ë‘˜ ë‹¤ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>
  </div>
  
  <!-- ëª¨ë“œ ì„ íƒ ì¹´ë“œ -->
  <div class="mode-cards">
    <div class="mode-card" data-mode="none" onclick="changeMode('none')">
      <h4>ğŸš« none</h4>
      <p>ì„ íƒ ê¸°ëŠ¥ ë¹„í™œì„±í™”. ì½ê¸° ì „ìš© ê·¸ë¦¬ë“œì— ì í•©í•©ë‹ˆë‹¤.</p>
      <code>selectionMode: 'none'</code>
      <div class="data-preview" style="margin-top: 8px;">
        selectedCells: []<br>
        selectedRows: []
      </div>
    </div>
    
    <div class="mode-card" data-mode="row" onclick="changeMode('row')">
      <h4>ğŸ“‹ row</h4>
      <p>í–‰ ë‹¨ìœ„ ì„ íƒ. í´ë¦­í•˜ë©´ í–‰ ì „ì²´ê°€ ì„ íƒë©ë‹ˆë‹¤. ë°ì´í„° ê´€ë¦¬ì— ì í•©í•©ë‹ˆë‹¤.</p>
      <code>selectionMode: 'row'</code>
      <div class="data-preview" style="margin-top: 8px;">
        selectedCells: []<br>
        selectedRows: [1, 2, 3]
      </div>
    </div>
    
    <div class="mode-card" data-mode="range" onclick="changeMode('range')">
      <h4>ğŸ“Š range</h4>
      <p>ì…€ ë‹¨ìœ„ ì„ íƒ. ë“œë˜ê·¸ë¡œ ë²”ìœ„ ì„ íƒ ê°€ëŠ¥. ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— ì í•©í•©ë‹ˆë‹¤.</p>
      <code>selectionMode: 'range'</code>
      <div class="data-preview" style="margin-top: 8px;">
        selectedCells: ["0:name", "1:name"]<br>
        selectedRows: []
      </div>
    </div>
    
    <div class="mode-card active" data-mode="all" onclick="changeMode('all')">
      <h4>âœ¨ all</h4>
      <p>ì…€+í–‰ ë™ì‹œ ì„ íƒ. ì…€ ì„ íƒ ì‹œ í•´ë‹¹ í–‰ë„ ìë™ìœ¼ë¡œ ì„ íƒë©ë‹ˆë‹¤.</p>
      <code>selectionMode: 'all'</code>
      <div class="data-preview" style="margin-top: 8px;">
        selectedCells: ["0:name", "1:name"]<br>
        selectedRows: [1, 2]
      </div>
    </div>
  </div>
  
  <!-- ì¡°ì‘ ì•ˆë‚´ -->
  <div class="instructions">
    <strong>ğŸ–±ï¸ ì„ íƒ ì¡°ì‘ ë°©ë²•</strong>
    <ul>
      <li><strong>í´ë¦­</strong>: ë‹¨ì¼ ì…€/í–‰ ì„ íƒ</li>
      <li><strong>Ctrl + í´ë¦­</strong>: ë–¨ì–´ì§„ ì…€/í–‰ ì¶”ê°€ ì„ íƒ</li>
      <li><strong>Shift + í´ë¦­</strong>: ë²”ìœ„ í™•ì¥ ì„ íƒ</li>
      <li><strong>ë“œë˜ê·¸</strong>: ë§ˆí‚¤ ì„ íƒ (range/all ëª¨ë“œ)</li>
      <li><strong>Ctrl + ë“œë˜ê·¸</strong>: ê¸°ì¡´ ì„ íƒ ìœ ì§€í•˜ë©° ì¶”ê°€ ì„ íƒ</li>
    </ul>
  </div>
  
  <div class="demo-container">
    <div class="toolbar">
      <div class="toolbar-group">
        <button onclick="loadData(1000)">1,000 í–‰</button>
        <button onclick="loadData(10000)">10,000 í–‰</button>
      </div>
      
      <div class="toolbar-divider"></div>
      
      <div class="toolbar-group">
        <button onclick="selectAll()" class="success">ì „ì²´ ì„ íƒ</button>
        <button onclick="clearSelection()" class="secondary">ì„ íƒ í•´ì œ</button>
      </div>
      
      <div class="toolbar-divider"></div>
      
      <div class="toolbar-group">
        <span id="currentMode" style="font-weight: bold; color: #1976d2;">í˜„ì¬ ëª¨ë“œ: all</span>
      </div>
    </div>
    
    <div id="grid"></div>
    
    <div class="status-bar" id="status">
      ì¤€ë¹„ë¨ - ìœ„ì—ì„œ ì„ íƒ ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”
    </div>
  </div>
  
  <!-- ì„ íƒ ì •ë³´ -->
  <div class="info-panel">
    <h3>ğŸ“Š ì„ íƒ ìƒíƒœ</h3>
    <div class="selection-info">
      <div>
        <h4>selectedRows (í–‰ ID)</h4>
        <pre id="selectedRows">[]</pre>
      </div>
      <div>
        <h4>selectedCells (ì…€ í‚¤)</h4>
        <pre id="selectedCells">[]</pre>
      </div>
    </div>
  </div>
  
  <script type="module">
    import { PureSheet } from '../../src/index.ts';
    
    let sheet = null;
    let currentMode = 'all';
    
    // ë°ì´í„° ìƒì„±
    function generateData(count) {
      const departments = ['Engineering', 'Sales', 'Marketing', 'HR', 'Finance'];
      const statuses = ['Active', 'Inactive', 'Pending', 'Suspended'];
      
      return Array.from({ length: count }, (_, i) => ({
        id: i + 1,
        name: `User ${i + 1}`,
        email: `user${i + 1}@example.com`,
        department: departments[i % departments.length],
        status: statuses[i % statuses.length],
        salary: Math.floor(50000 + Math.random() * 100000),
        joinDate: `2020-${String((i % 12) + 1).padStart(2, '0')}-${String((i % 28) + 1).padStart(2, '0')}`,
      }));
    }
    
    // ìƒíƒœ ì—…ë°ì´íŠ¸
    function updateStatus(message) {
      document.getElementById('status').textContent = message;
    }
    
    function updateSelectionInfo(state) {
      document.getElementById('selectedRows').textContent = 
        JSON.stringify(state.selectedRows || [], null, 2);
      document.getElementById('selectedCells').textContent = 
        JSON.stringify(state.selectedCells || [], null, 2);
    }
    
    // ëª¨ë“œ ë³€ê²½
    window.changeMode = async function(mode) {
      currentMode = mode;
      
      // UI ì—…ë°ì´íŠ¸
      document.querySelectorAll('.mode-card').forEach(card => {
        card.classList.toggle('active', card.dataset.mode === mode);
      });
      document.getElementById('currentMode').textContent = `í˜„ì¬ ëª¨ë“œ: ${mode}`;
      
      // ê·¸ë¦¬ë“œ ì¬ìƒì„±
      const container = document.getElementById('grid');
      if (sheet) {
        sheet.destroy();
      }
      
      const columns = [
        { key: 'id', header: 'ID', width: 60 },
        { key: 'name', header: 'Name', width: 150 },
        { key: 'email', header: 'Email', width: 220 },
        { key: 'department', header: 'Department', width: 120 },
        { key: 'status', header: 'Status', width: 100 },
        { key: 'salary', header: 'Salary', width: 100, formatter: (v) => '$' + v.toLocaleString() },
        { key: 'joinDate', header: 'Join Date', width: 120 },
      ];
      
      sheet = new PureSheet(container, {
        columns,
        rowHeight: 36,
        headerHeight: 40,
        selectionMode: mode,
        multiSelect: true,
        resizableColumns: true,
        theme: 'light',
      });
      
      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      sheet.on('selection:changed', (state) => {
        updateSelectionInfo(state);
      });
      
      // ë°ì´í„° ë¡œë“œ
      await sheet.loadData(generateData(1000));
      updateSelectionInfo({ selectedRows: [], selectedCells: [] });
      updateStatus(`ëª¨ë“œ ë³€ê²½: ${mode} - ${getModeDescription(mode)}`);
    };
    
    function getModeDescription(mode) {
      const descriptions = {
        'none': 'ì„ íƒ ë¹„í™œì„±í™”',
        'row': 'í–‰ ë‹¨ìœ„ ì„ íƒ',
        'range': 'ì…€ ë‹¨ìœ„ ì„ íƒ (í–‰ ë™ê¸°í™” ì—†ìŒ)',
        'all': 'ì…€+í–‰ ë™ì‹œ ì„ íƒ'
      };
      return descriptions[mode] || '';
    }
    
    // ì „ì—­ í•¨ìˆ˜
    window.loadData = async function(count) {
      if (!sheet) return;
      updateStatus(`${count.toLocaleString()}ê°œ ë°ì´í„° ë¡œë“œ ì¤‘...`);
      await sheet.loadData(generateData(count));
      updateStatus(`${count.toLocaleString()}ê°œ í–‰ ë¡œë“œ ì™„ë£Œ`);
    };
    
    window.selectAll = function() {
      if (sheet) {
        sheet.selectAll();
        updateStatus('ì „ì²´ ì„ íƒë¨');
      }
    };
    
    window.clearSelection = function() {
      if (sheet) {
        sheet.clearSelection();
        updateSelectionInfo({ selectedRows: [], selectedCells: [] });
        updateStatus('ì„ íƒ í•´ì œë¨');
      }
    };
    
    // ì´ˆê¸°í™”
    changeMode('all');
  </script>
</body>
</html>

