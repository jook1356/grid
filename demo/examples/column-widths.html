<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì»¬ëŸ¼ ë„ˆë¹„ & Flex (Column Widths & Flex) - PureSheet Demo</title>
    <link rel="stylesheet" href="../shared/styles.css">
    <link rel="stylesheet" href="../../src/ui/style/default.css">
    <style>
        .width-info {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .width-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .width-table th,
        .width-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .width-table th {
            background: var(--bg);
            font-weight: 600;
            color: var(--text-muted);
        }

        .width-table code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
        }

        .width-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
        }

        .width-badge.px {
            background: #e3f2fd;
            color: #1565c0;
        }

        .width-badge.rem {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .width-badge.percent {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .width-badge.auto {
            background: #fff3e0;
            color: #e65100;
        }

        .width-badge.flex {
            background: #fce4ec;
            color: #c2185b;
        }

        .section-divider {
            margin: 24px 0;
            border-top: 2px dashed var(--border);
        }

        .measured-widths {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .measured-item {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 6px 10px;
            font-size: 12px;
        }

        .measured-item .key {
            font-weight: 600;
            color: var(--text-muted);
        }

        .measured-item .value {
            color: var(--primary);
            font-family: 'Monaco', 'Consolas', monospace;
        }

        #flexGrid {
            height: 600px;
            overflow: hidden;
        }
    </style>
    <script src="../shared/nav-sidebar.js" defer></script>
</head>

<body>
  <!-- ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav-sidebar></nav-sidebar>

    <!-- í—¤ë” -->
    <div class="demo-header">
        <h1>ğŸ“ ì»¬ëŸ¼ ë„ˆë¹„ & Flex (Column Widths & Flex)</h1>
        <span class="badge badge-implemented">êµ¬í˜„ë¨</span>
    </div>

    <!-- ì„¤ëª… -->
    <div class="demo-description">
        <p>
            ì»¬ëŸ¼ ë„ˆë¹„ë¥¼ <strong>ìˆ«ì(px)</strong> ë¿ë§Œ ì•„ë‹ˆë¼ <strong>CSS ë¬¸ìì—´</strong>ë¡œë„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            <code>'150px'</code>, <code>'20rem'</code>, <code>'15%'</code>, <code>'auto'</code> ë“± ë‹¤ì–‘í•œ ë‹¨ìœ„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
        </p>
        <p style="margin-top: 8px;">
            <strong>flex</strong> ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ë‚¨ì€ ê³µê°„ì„ ë¹„ìœ¨ë¡œ ë¶„ë°°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            ë“œë˜ê·¸ë¡œ ì»¬ëŸ¼ ë¦¬ì‚¬ì´ì¦ˆ ì‹œ flexê°€ ìë™ìœ¼ë¡œ í•´ì œë˜ì–´ ê³ ì • ë„ˆë¹„ë¡œ ì „í™˜ë©ë‹ˆë‹¤.
        </p>
    </div>

    <div class="demo-container">
        <!-- ë„ˆë¹„ ì„¤ì • ì •ë³´ -->
        <div class="width-info">
            <h3 style="margin-top: 0; margin-bottom: 12px;">ğŸ“Š ì»¬ëŸ¼ ë„ˆë¹„ ì„¤ì •</h3>
            <table class="width-table">
                <thead>
                    <tr>
                        <th>ì»¬ëŸ¼</th>
                        <th>width</th>
                        <th>minWidth</th>
                        <th>maxWidth</th>
                        <th>íƒ€ì…</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ID</td>
                        <td><code>60</code></td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="width-badge px">ìˆ«ì(px)</span></td>
                    </tr>
                    <tr>
                        <td>ì´ë¦„</td>
                        <td><code>'150px'</code></td>
                        <td><code>100</code></td>
                        <td><code>200</code></td>
                        <td><span class="width-badge px">ë¬¸ìì—´(px)</span></td>
                    </tr>
                    <tr>
                        <td>ë¶€ì„œ</td>
                        <td><code>'8rem'</code></td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="width-badge rem">rem</span></td>
                    </tr>
                    <tr>
                        <td>ê¸‰ì—¬</td>
                        <td><code>'15%'</code></td>
                        <td><code>80</code></td>
                        <td><code>200</code></td>
                        <td><span class="width-badge percent">%</span></td>
                    </tr>
                    <tr>
                        <td>ë³´ë„ˆìŠ¤</td>
                        <td><code>'auto'</code></td>
                        <td><code>60</code></td>
                        <td><code>150</code></td>
                        <td><span class="width-badge auto">auto</span></td>
                    </tr>
                    <tr>
                        <td>ì„±ê³¼</td>
                        <td><code>120</code></td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="width-badge px">ìˆ«ì(px)</span></td>
                    </tr>
                </tbody>
            </table>

            <h4 style="margin-top: 16px; margin-bottom: 8px;">ğŸ“ ì¸¡ì •ëœ ì‹¤ì œ ë„ˆë¹„ (CSS ë³€ìˆ˜)</h4>
            <div class="measured-widths" id="measuredWidths">
                <span style="color: var(--text-muted); font-size: 12px;">ë¡œë”© ì¤‘...</span>
            </div>
        </div>

        <!-- íˆ´ë°” -->
        <div class="toolbar">
            <div class="toolbar-group">
                <label>ğŸ“Š ë°ì´í„°:</label>
                <button onclick="loadData(100)">100ê°œ</button>
                <button onclick="loadData(1000)">1,000ê°œ</button>
                <button onclick="loadData(10000)">10,000ê°œ</button>
            </div>
            <div class="toolbar-divider"></div>
            <div class="toolbar-group">
                <button onclick="measureWidths()" class="success">ë„ˆë¹„ ì¸¡ì •</button>
                <button onclick="resetWidths()" class="secondary">ë„ˆë¹„ ì´ˆê¸°í™”</button>
            </div>
        </div>

        <div id="grid"></div>

        <div class="status-bar" id="status">
            ì¤€ë¹„ë¨ - ì»¬ëŸ¼ í—¤ë”ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ë¦¬ì‚¬ì´ì¦ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
        </div>

        <div class="section-divider"></div>

        <!-- Flex ì„¤ì • ì •ë³´ -->
        <div class="width-info">
            <h3 style="margin-top: 0; margin-bottom: 12px;">ğŸ”„ Flex ì»¬ëŸ¼ ì„¤ì •</h3>
            <p style="margin-bottom: 12px; color: var(--text-muted); font-size: 13px;">
                flex ê°’ì´ ìˆëŠ” ì»¬ëŸ¼ì€ ë‚¨ì€ ê³µê°„ì„ ë¹„ìœ¨ë¡œ ë¶„ë°°í•©ë‹ˆë‹¤. í—¤ë”ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ë¦¬ì‚¬ì´ì¦ˆí•˜ë©´ flexê°€ í•´ì œë©ë‹ˆë‹¤.
            </p>
            <table class="width-table">
                <thead>
                    <tr>
                        <th>ì»¬ëŸ¼</th>
                        <th>width</th>
                        <th>flex</th>
                        <th>minWidth</th>
                        <th>maxWidth</th>
                        <th>ì„¤ëª…</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ID</td>
                        <td><code>60</code></td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>ê³ ì • ë„ˆë¹„</td>
                    </tr>
                    <tr>
                        <td>ì´ë¦„</td>
                        <td>-</td>
                        <td><code>1</code></td>
                        <td><code>100</code></td>
                        <td><code>300</code></td>
                        <td><span class="width-badge flex">flex: 1</span></td>
                    </tr>
                    <tr>
                        <td>ë¶€ì„œ</td>
                        <td>-</td>
                        <td><code>1</code></td>
                        <td><code>80</code></td>
                        <td><code>200</code></td>
                        <td><span class="width-badge flex">flex: 1</span></td>
                    </tr>
                    <tr>
                        <td>ê¸‰ì—¬</td>
                        <td>-</td>
                        <td><code>2</code></td>
                        <td><code>100</code></td>
                        <td>-</td>
                        <td><span class="width-badge flex">flex: 2</span> (2ë°° ê³µê°„)</td>
                    </tr>
                    <tr>
                        <td>ë³´ë„ˆìŠ¤</td>
                        <td><code>100</code></td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>ê³ ì • ë„ˆë¹„</td>
                    </tr>
                    <tr>
                        <td>ì„±ê³¼</td>
                        <td>-</td>
                        <td><code>1</code></td>
                        <td><code>80</code></td>
                        <td><code>150</code></td>
                        <td><span class="width-badge flex">flex: 1</span></td>
                    </tr>
                </tbody>
            </table>

            <h4 style="margin-top: 16px; margin-bottom: 8px;">ğŸ“ ì¸¡ì •ëœ ì‹¤ì œ ë„ˆë¹„ (Flex Grid)</h4>
            <div class="measured-widths" id="measuredFlexWidths">
                <span style="color: var(--text-muted); font-size: 12px;">ë¡œë”© ì¤‘...</span>
            </div>
        </div>

        <!-- Flex íˆ´ë°” -->
        <div class="toolbar">
            <div class="toolbar-group">
                <label>ğŸ”„ Flex Grid:</label>
                <button onclick="loadFlexData(100)">100ê°œ</button>
                <button onclick="loadFlexData(1000)">1,000ê°œ</button>
            </div>
            <div class="toolbar-divider"></div>
            <div class="toolbar-group">
                <button onclick="measureFlexWidths()" class="success">Flex ë„ˆë¹„ ì¸¡ì •</button>
                <button onclick="resetFlexGrid()" class="secondary">Flex ì´ˆê¸°í™”</button>
            </div>
        </div>

        <div id="flexGrid"></div>

        <div class="status-bar" id="flexStatus">
            Flex Grid - ì»¬ëŸ¼ í—¤ë”ë¥¼ ë“œë˜ê·¸í•˜ë©´ flexê°€ í•´ì œë˜ê³  ê³ ì • ë„ˆë¹„ë¡œ ì „í™˜ë©ë‹ˆë‹¤
        </div>
    </div>

    <!-- ì½”ë“œ ì˜ˆì œ -->
    <div class="code-example">
        <h3>ë„ˆë¹„ ë‹¨ìœ„ ì‚¬ìš© ì˜ˆì‹œ</h3>
        <pre><span class="keyword">const</span> grid = <span class="keyword">new</span> <span class="function">PureSheet</span>(container, {
  <span class="property">fields</span>: [
    <span class="comment">// ìˆ«ì (í”½ì…€)</span>
    { <span class="property">key</span>: <span class="string">'id'</span>, <span class="property">header</span>: <span class="string">'ID'</span>, <span class="property">width</span>: <span class="number">60</span> },

    <span class="comment">// ë¬¸ìì—´ (px)</span>
    { <span class="property">key</span>: <span class="string">'name'</span>, <span class="property">header</span>: <span class="string">'ì´ë¦„'</span>, <span class="property">width</span>: <span class="string">'150px'</span> },

    <span class="comment">// rem ë‹¨ìœ„</span>
    { <span class="property">key</span>: <span class="string">'dept'</span>, <span class="property">header</span>: <span class="string">'ë¶€ì„œ'</span>, <span class="property">width</span>: <span class="string">'8rem'</span> },

    <span class="comment">// í¼ì„¼íŠ¸ (ë¶€ëª¨ ê¸°ì¤€)</span>
    { <span class="property">key</span>: <span class="string">'salary'</span>, <span class="property">header</span>: <span class="string">'ê¸‰ì—¬'</span>, <span class="property">width</span>: <span class="string">'15%'</span>, <span class="property">minWidth</span>: <span class="number">80</span>, <span class="property">maxWidth</span>: <span class="number">200</span> },

    <span class="comment">// auto (ë‚´ìš©ì— ë§ì¶¤)</span>
    { <span class="property">key</span>: <span class="string">'bonus'</span>, <span class="property">header</span>: <span class="string">'ë³´ë„ˆìŠ¤'</span>, <span class="property">width</span>: <span class="string">'auto'</span>, <span class="property">minWidth</span>: <span class="number">60</span>, <span class="property">maxWidth</span>: <span class="number">150</span> },
  ],
});</pre>
    </div>

    <!-- Flex ì½”ë“œ ì˜ˆì œ -->
    <div class="code-example">
        <h3>Flex ì‚¬ìš© ì˜ˆì‹œ</h3>
        <pre><span class="keyword">const</span> grid = <span class="keyword">new</span> <span class="function">PureSheet</span>(container, {
  <span class="property">fields</span>: [
    <span class="comment">// ê³ ì • ë„ˆë¹„</span>
    { <span class="property">key</span>: <span class="string">'id'</span>, <span class="property">header</span>: <span class="string">'ID'</span>, <span class="property">width</span>: <span class="number">60</span> },

    <span class="comment">// flex: 1 - ë‚¨ì€ ê³µê°„ì„ 1:1:2:1 ë¹„ìœ¨ë¡œ ë¶„ë°°</span>
    { <span class="property">key</span>: <span class="string">'name'</span>, <span class="property">header</span>: <span class="string">'ì´ë¦„'</span>, <span class="property">flex</span>: <span class="number">1</span>, <span class="property">minWidth</span>: <span class="number">100</span>, <span class="property">maxWidth</span>: <span class="number">300</span> },
    { <span class="property">key</span>: <span class="string">'dept'</span>, <span class="property">header</span>: <span class="string">'ë¶€ì„œ'</span>, <span class="property">flex</span>: <span class="number">1</span>, <span class="property">minWidth</span>: <span class="number">80</span> },

    <span class="comment">// flex: 2 - ë‹¤ë¥¸ flex ì»¬ëŸ¼ì˜ 2ë°° ê³µê°„</span>
    { <span class="property">key</span>: <span class="string">'salary'</span>, <span class="property">header</span>: <span class="string">'ê¸‰ì—¬'</span>, <span class="property">flex</span>: <span class="number">2</span>, <span class="property">minWidth</span>: <span class="number">100</span> },

    <span class="comment">// ê³ ì • ë„ˆë¹„ (flex ì—†ìŒ)</span>
    { <span class="property">key</span>: <span class="string">'bonus'</span>, <span class="property">header</span>: <span class="string">'ë³´ë„ˆìŠ¤'</span>, <span class="property">width</span>: <span class="number">100</span> },

    <span class="comment">// flex: 1 + minWidth/maxWidth ì œì•½</span>
    { <span class="property">key</span>: <span class="string">'perf'</span>, <span class="property">header</span>: <span class="string">'ì„±ê³¼'</span>, <span class="property">flex</span>: <span class="number">1</span>, <span class="property">minWidth</span>: <span class="number">80</span>, <span class="property">maxWidth</span>: <span class="number">150</span> },
  ],
});</pre>
    </div>

    <!-- í•µì‹¬ ê°œë… -->
    <div class="info-panel">
        <h3>ğŸ’¡ ë™ì‘ ì›ë¦¬</h3>
        <ol style="margin: 0; padding-left: 20px; line-height: 1.8;">
            <li><strong>í—¤ë” ì…€</strong>ì— ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ <code>width</code>, <code>minWidth</code>, <code>maxWidth</code>,
                <code>flex</code> ì ìš©
            </li>
            <li>ë¸Œë¼ìš°ì €ê°€ CSSì— ë”°ë¼ <strong>ì‹¤ì œ ë„ˆë¹„ ê³„ì‚°</strong> (%, rem, auto, flex ë“± ì²˜ë¦¬)</li>
            <li>ë Œë”ë§ í›„ <code>offsetWidth</code>ë¡œ <strong>ì‹¤ì œ í”½ì…€ ê°’ ì¸¡ì •</strong></li>
            <li>ì¸¡ì •ëœ ê°’ì„ <strong>CSS ë³€ìˆ˜</strong>ì— ì„¤ì •: <code>--col-ì»¬ëŸ¼ëª…-width</code></li>
            <li>ëª¨ë“  ë°ì´í„° ì…€ì´ <strong>CSS ë³€ìˆ˜ ì°¸ì¡°</strong>í•˜ì—¬ ë™ì¼í•œ ë„ˆë¹„ ìœ ì§€</li>
        </ol>
    </div>

    <!-- Flex ë™ì‘ ì›ë¦¬ -->
    <div class="info-panel">
        <h3>ğŸ”„ Flex ë™ì‘ ì›ë¦¬</h3>
        <ol style="margin: 0; padding-left: 20px; line-height: 1.8;">
            <li><code>flex: ìˆ«ì</code>ê°€ <strong>.ps-header-cell</strong>ê³¼ <strong>.ps-cell</strong>ì— ì ìš©ë¨</li>
            <li>flex ì»¬ëŸ¼ë“¤ì€ ë‚¨ì€ ê³µê°„ì„ <strong>ë¹„ìœ¨ë¡œ ë¶„ë°°</strong> (flex: 2ëŠ” flex: 1ì˜ 2ë°°)</li>
            <li><code>minWidth</code>/<code>maxWidth</code>ë¡œ flex ë²”ìœ„ ì œí•œ ê°€ëŠ¥</li>
            <li>í—¤ë”ë¥¼ <strong>ë“œë˜ê·¸í•˜ì—¬ ë¦¬ì‚¬ì´ì¦ˆ</strong>í•˜ë©´ <strong>flexê°€ ìë™ í•´ì œ</strong>ë¨</li>
            <li>í•´ì œ í›„ì—ëŠ” ê³ ì • í”½ì…€ ë„ˆë¹„ë¡œ ë™ì‘</li>
        </ol>
    </div>

    <script type="module">
        const { PureSheet } = await import('../../src/index.ts');

        let grid = null;
        let flexGrid = null;
        const columnKeys = ['id', 'name', 'department', 'salary', 'bonus', 'performance'];

        function updateStatus(msg) {
            document.getElementById('status').textContent = msg;
        }

        function updateFlexStatus(msg) {
            document.getElementById('flexStatus').textContent = msg;
        }

        // ìƒ˜í”Œ ë°ì´í„° ìƒì„±
        function generateData(count) {
            const names = ['ê¹€ì² ìˆ˜', 'ì´ì˜í¬', 'ë°•ë¯¼ìˆ˜', 'ì •ìˆ˜ì§„', 'ìµœë™í˜„', 'ê°•ë¯¸ì˜', 'ìœ¤ì„œì¤€', 'ì¥í•˜ëŠ˜'];
            const departments = ['ê°œë°œíŒ€', 'ë§ˆì¼€íŒ…', 'ì˜ì—…íŒ€', 'ì¸ì‚¬íŒ€', 'ì¬ë¬´íŒ€', 'ê¸°íšíŒ€'];

            return Array.from({ length: count }, (_, i) => ({
                id: i + 1,
                name: names[i % names.length] + (i + 1),
                department: departments[i % departments.length],
                salary: 3000 + Math.floor(Math.random() * 7000),
                bonus: 100 + Math.floor(Math.random() * 900),
                performance: Math.floor(Math.random() * 100),
            }));
        }

        // ë„ˆë¹„ ì¸¡ì • í•¨ìˆ˜
        window.measureWidths = function () {
            const container = document.getElementById('measuredWidths');
            const gridContainer = document.querySelector('.ps-grid-container');

            if (!gridContainer) {
                container.innerHTML = '<span style="color: #f44336;">ê·¸ë¦¬ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>';
                return;
            }

            const widths = columnKeys.map(key => {
                const cssVar = getComputedStyle(gridContainer).getPropertyValue(`--col-${key}-width`);
                return { key, value: cssVar.trim() || 'ì¸¡ì • ì•ˆë¨' };
            });

            container.innerHTML = widths.map(w =>
                `<div class="measured-item"><span class="key">${w.key}:</span> <span class="value">${w.value}</span></div>`
            ).join('');

            updateStatus('CSS ë³€ìˆ˜ ë„ˆë¹„ ì¸¡ì • ì™„ë£Œ');
        };

        // ë°ì´í„° ë¡œë“œ
        window.loadData = async function (count) {
            if (!grid) return;

            updateStatus(`${count.toLocaleString()}ê°œ ë°ì´í„° ìƒì„± ì¤‘...`);
            const data = generateData(count);

            const start = performance.now();
            await grid.loadData(data);
            const elapsed = performance.now() - start;

            updateStatus(`${count.toLocaleString()}ê°œ í–‰ ë¡œë“œ ì™„ë£Œ (${elapsed.toFixed(0)}ms)`);

            // ë¡œë“œ í›„ ë„ˆë¹„ ì¸¡ì •
            setTimeout(measureWidths, 100);
        };

        // ë„ˆë¹„ ì´ˆê¸°í™” (ê·¸ë¦¬ë“œ ì¬ìƒì„±)
        window.resetWidths = async function () {
            const currentData = grid?.getAllData() || [];
            await initGrid();
            if (currentData.length > 0) {
                await grid.loadData([...currentData]);
            }
            setTimeout(measureWidths, 100);
            updateStatus('ì»¬ëŸ¼ ë„ˆë¹„ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
        };

        // Flex ë„ˆë¹„ ì¸¡ì • í•¨ìˆ˜
        window.measureFlexWidths = function () {
            const container = document.getElementById('measuredFlexWidths');
            const gridContainer = document.querySelector('#flexGrid .ps-grid-container');

            if (!gridContainer) {
                container.innerHTML = '<span style="color: #f44336;">Flex ê·¸ë¦¬ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>';
                return;
            }

            const widths = columnKeys.map(key => {
                const cssVar = getComputedStyle(gridContainer).getPropertyValue(`--col-${key}-width`);
                return { key, value: cssVar.trim() || 'ì¸¡ì • ì•ˆë¨' };
            });

            container.innerHTML = widths.map(w =>
                `<div class="measured-item"><span class="key">${w.key}:</span> <span class="value">${w.value}</span></div>`
            ).join('');

            updateFlexStatus('Flex Grid CSS ë³€ìˆ˜ ë„ˆë¹„ ì¸¡ì • ì™„ë£Œ');
        };

        // Flex ë°ì´í„° ë¡œë“œ
        window.loadFlexData = async function (count) {
            if (!flexGrid) return;

            updateFlexStatus(`${count.toLocaleString()}ê°œ ë°ì´í„° ìƒì„± ì¤‘...`);
            const data = generateData(count);

            const start = performance.now();
            await flexGrid.loadData(data);
            const elapsed = performance.now() - start;

            updateFlexStatus(`Flex Grid: ${count.toLocaleString()}ê°œ í–‰ ë¡œë“œ ì™„ë£Œ (${elapsed.toFixed(0)}ms)`);

            // ë¡œë“œ í›„ ë„ˆë¹„ ì¸¡ì •
            setTimeout(measureFlexWidths, 100);
        };

        // Flex ê·¸ë¦¬ë“œ ì´ˆê¸°í™”
        window.resetFlexGrid = async function () {
            const currentData = flexGrid?.getAllData() || [];
            await initFlexGrid();
            if (currentData.length > 0) {
                await flexGrid.loadData([...currentData]);
            }
            setTimeout(measureFlexWidths, 100);
            updateFlexStatus('Flex ì»¬ëŸ¼ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
        };

        // Flex ê·¸ë¦¬ë“œ ì´ˆê¸°í™”
        async function initFlexGrid() {
            const container = document.getElementById('flexGrid');
            container.innerHTML = '';

            // flex ì‚¬ìš© ì»¬ëŸ¼ ì„¤ì •
            const fields = [
                {
                    key: 'id',
                    header: 'ID',
                    dataType: 'number',
                    width: 60,  // ê³ ì • ë„ˆë¹„
                },
                {
                    key: 'name',
                    header: 'ì´ë¦„',
                    dataType: 'string',
                    flex: 1,  // flex: 1
                    minWidth: 100,
                    maxWidth: 300,
                },
                {
                    key: 'department',
                    header: 'ë¶€ì„œ',
                    dataType: 'string',
                    flex: 1,  // flex: 1
                    minWidth: 80,
                    maxWidth: 200,
                },
                {
                    key: 'salary',
                    header: 'ê¸‰ì—¬',
                    dataType: 'number',
                    flex: 2,  // flex: 2 (2ë°° ê³µê°„)
                    minWidth: 100,
                    formatter: v => 'â‚©' + (v * 10000).toLocaleString(),
                },
                {
                    key: 'bonus',
                    header: 'ë³´ë„ˆìŠ¤',
                    dataType: 'number',
                    width: 100,  // ê³ ì • ë„ˆë¹„
                    formatter: v => 'â‚©' + (v * 10000).toLocaleString(),
                },
                {
                    key: 'performance',
                    header: 'ì„±ê³¼',
                    dataType: 'number',
                    flex: 1,  // flex: 1
                    minWidth: 80,
                    maxWidth: 150,
                    formatter: v => v + '%',
                },
            ];

            flexGrid = new PureSheet(container, {
                mode: 'flat',
                fields,
                rowHeight: 36,
                headerHeight: 40,
                resizableColumns: true,
                selectionMode: 'all',
                theme: 'light',
            });

            return flexGrid;
        }

        // ê·¸ë¦¬ë“œ ì´ˆê¸°í™”
        async function initGrid() {
            const container = document.getElementById('grid');
            container.innerHTML = '';

            // ë‹¤ì–‘í•œ width ë‹¨ìœ„ ì‚¬ìš©
            const fields = [
                {
                    key: 'id',
                    header: 'ID',
                    dataType: 'number',
                    width: 60,  // ìˆ«ì (px)
                },
                {
                    key: 'name',
                    header: 'ì´ë¦„',
                    dataType: 'string',
                    width: '150px',  // ë¬¸ìì—´ (px)
                    minWidth: 100,
                    maxWidth: 200,
                },
                {
                    key: 'department',
                    header: 'ë¶€ì„œ',
                    dataType: 'string',
                    width: '12rem',  // rem ë‹¨ìœ„
                },
                {
                    key: 'salary',
                    header: 'ê¸‰ì—¬',
                    dataType: 'number',
                    width: '20%',  // í¼ì„¼íŠ¸
                    minWidth: '10%',
                    maxWidth: '30%',
                    formatter: v => 'â‚©' + (v * 10000).toLocaleString(),
                },
                {
                    key: 'bonus',
                    header: 'ë³´ë„ˆìŠ¤',
                    dataType: 'number',
                    width: 'auto',  // auto
                    minWidth: 'auto',
                    maxWidth: 150,
                    formatter: v => 'â‚©' + (v * 10000).toLocaleString(),
                },
                {
                    key: 'performance',
                    header: 'ì„±ê³¼',
                    dataType: 'number',
                    width: 120,  // ìˆ«ì (px)
                    formatter: v => v + '%',
                },
            ];

            grid = new PureSheet(container, {
                mode: 'flat',
                fields,
                rowHeight: 36,
                headerHeight: 40,
                resizableColumns: true,
                selectionMode: 'all',
                theme: 'light',
            });

            return grid;
        }

        // ì´ˆê¸°í™”
        async function init() {
            await initGrid();
            await loadData(100);

            // Flex ê·¸ë¦¬ë“œë„ ì´ˆê¸°í™”
            await initFlexGrid();
            await loadFlexData(100);
        }

        init().catch(console.error);
    </script>
</body>

</html>